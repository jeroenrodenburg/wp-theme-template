'use strict';(function(b,c){'use strict';function d(q){this.time=q.time,this.target=q.target,this.rootBounds=q.rootBounds,this.boundingClientRect=q.boundingClientRect,this.intersectionRect=q.intersectionRect||m(),this.isIntersecting=!!q.intersectionRect;var r=this.boundingClientRect,s=r.width*r.height,u=this.intersectionRect,v=u.width*u.height;this.intersectionRatio=s?v/s:this.isIntersecting?1:0}function e(q,r){var s=r||{};if('function'!=typeof q)throw new Error('callback must be a function');if(s.root&&1!=s.root.nodeType)throw new Error('root must be an Element');this._checkForIntersections=g(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=q,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map(function(u){return u.value+u.unit}).join(' ')}function f(){return b.performance&&performance.now&&performance.now()}function g(q,r){var s=null;return function(){s||(s=setTimeout(function(){q(),s=null},r))}}function h(q,r,s,u){'function'==typeof q.addEventListener?q.addEventListener(r,s,u||!1):'function'==typeof q.attachEvent&&q.attachEvent('on'+r,s)}function j(q,r,s,u){'function'==typeof q.removeEventListener?q.removeEventListener(r,s,u||!1):'function'==typeof q.detatchEvent&&q.detatchEvent('on'+r,s)}function k(q,r){var s=Math.max(q.top,r.top),u=Math.min(q.bottom,r.bottom),v=Math.max(q.left,r.left),w=Math.min(q.right,r.right),x=w-v,y=u-s;return 0<=x&&0<=y&&{top:s,bottom:u,left:v,right:w,width:x,height:y}}function l(q){var r;try{r=q.getBoundingClientRect()}catch(s){}return r?(r.width&&r.height||(r={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.right-r.left,height:r.bottom-r.top}),r):m()}function m(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function n(q,r){for(var s=r;s;){if(s==q)return!0;s=o(s)}return!1}function o(q){var r=q.parentNode;return r&&11==r.nodeType&&r.host?r.host:r}if('IntersectionObserver'in b&&'IntersectionObserverEntry'in b&&'intersectionRatio'in b.IntersectionObserverEntry.prototype)return void('isIntersecting'in b.IntersectionObserverEntry.prototype||Object.defineProperty(b.IntersectionObserverEntry.prototype,'isIntersecting',{get:function get(){return 0<this.intersectionRatio}}));var p=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(q){var r=this._observationTargets.some(function(s){return s.element==q});if(!r){if(!(q&&1==q.nodeType))throw new Error('target must be an Element');this._registerInstance(),this._observationTargets.push({element:q,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(q){this._observationTargets=this._observationTargets.filter(function(r){return r.element!=q}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var q=this._queuedEntries.slice();return this._queuedEntries=[],q},e.prototype._initThresholds=function(q){var r=q||[0];return Array.isArray(r)||(r=[r]),r.sort().filter(function(s,u,v){if('number'!=typeof s||isNaN(s)||0>s||1<s)throw new Error('threshold must be a number between 0 and 1 inclusively');return s!==v[u-1]})},e.prototype._parseRootMargin=function(q){var s=(q||'0px').split(/\s+/).map(function(u){var v=/^(-?\d*\.?\d+)(px|%)$/.exec(u);if(!v)throw new Error('rootMargin must be specified in pixels or percent');return{value:parseFloat(v[1]),unit:v[2]}});return s[1]=s[1]||s[0],s[2]=s[2]||s[0],s[3]=s[3]||s[1],s},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(h(b,'resize',this._checkForIntersections,!0),h(c,'scroll',this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&'MutationObserver'in b&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(c,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,j(b,'resize',this._checkForIntersections,!0),j(c,'scroll',this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var q=this._rootIsInDom(),r=q?this._getRootRect():m();this._observationTargets.forEach(function(s){var u=s.element,v=l(u),w=this._rootContainsTarget(u),x=s.entry,y=q&&w&&this._computeTargetAndRootIntersection(u,r),z=s.entry=new d({time:f(),target:u,boundingClientRect:v,rootBounds:r,intersectionRect:y});x?q&&w?this._hasCrossedThreshold(x,z)&&this._queuedEntries.push(z):x&&x.isIntersecting&&this._queuedEntries.push(z):this._queuedEntries.push(z)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(q,r){if('none'!=b.getComputedStyle(q).display){for(var s=l(q),u=s,v=o(q),w=!1;!w;){var x=null,y=1==v.nodeType?b.getComputedStyle(v):{};if('none'==y.display)return;if(v==this.root||v==c?(w=!0,x=r):v!=c.body&&v!=c.documentElement&&'visible'!=y.overflow&&(x=l(v)),x&&(u=k(x,u),!u))break;v=o(v)}return u}},e.prototype._getRootRect=function(){var q;if(this.root)q=l(this.root);else{var r=c.documentElement,s=c.body;q={top:0,left:0,right:r.clientWidth||s.clientWidth,width:r.clientWidth||s.clientWidth,bottom:r.clientHeight||s.clientHeight,height:r.clientHeight||s.clientHeight}}return this._expandRectByRootMargin(q)},e.prototype._expandRectByRootMargin=function(q){var r=this._rootMarginValues.map(function(u,v){return'px'==u.unit?u.value:u.value*(v%2?q.width:q.height)/100}),s={top:q.top-r[0],right:q.right+r[1],bottom:q.bottom+r[2],left:q.left-r[3]};return s.width=s.right-s.left,s.height=s.bottom-s.top,s},e.prototype._hasCrossedThreshold=function(q,r){var s=q&&q.isIntersecting?q.intersectionRatio||0:-1,u=r.isIntersecting?r.intersectionRatio||0:-1;if(s!==u)for(var w,v=0;v<this.thresholds.length;v++)if(w=this.thresholds[v],w==s||w==u||w<s!=w<u)return!0},e.prototype._rootIsInDom=function(){return!this.root||n(c,this.root)},e.prototype._rootContainsTarget=function(q){return n(this.root||c,q)},e.prototype._registerInstance=function(){0>p.indexOf(this)&&p.push(this)},e.prototype._unregisterInstance=function(){var q=p.indexOf(this);-1!=q&&p.splice(q,1)},b.IntersectionObserver=e,b.IntersectionObserverEntry=d})(window,document);